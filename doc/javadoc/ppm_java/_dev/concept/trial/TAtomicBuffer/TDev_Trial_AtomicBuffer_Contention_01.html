<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_111) on Wed Dec 28 20:14:15 GMT 2016 -->
<title>TDev_Trial_AtomicBuffer_Contention_01</title>
<meta name="date" content="2016-12-28">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TDev_Trial_AtomicBuffer_Contention_01";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TDev_Trial_AtomicBuffer_Contention_01.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.TConsumer.html" title="class in ppm_java._dev.concept.trial.TAtomicBuffer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html" target="_top">Frames</a></li>
<li><a href="TDev_Trial_AtomicBuffer_Contention_01.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ppm_java._dev.concept.trial.TAtomicBuffer</div>
<h2 title="Class TDev_Trial_AtomicBuffer_Contention_01" class="title">Class TDev_Trial_AtomicBuffer_Contention_01</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ppm_java._dev.concept.trial.TAtomicBuffer.TDev_Trial_AtomicBuffer_Contention_01</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">TDev_Trial_AtomicBuffer_Contention_01</span>
extends java.lang.Object</pre>
<div class="block">TAtomicBuffer contention trial. I have one thread producing
 new frames and n threads consuming them. Would we get corrupted 
 data? 
 
 Motivation: Find out whether the mutex free synchronization 
 in TAtomicBuffer is working. If we get corrupted data we have 
 a race condition problem, due to faulty synchronization 
 technique.
 
 Assumption: We won't test whether AtomicInteger is truly atomic - 
 all documentation indicates an AtomicInteger is atomic 
 across multiple threads using it, therefore we just follow
 the documentation and presume that it is so.
 This test just establishes whether we use the AtomicInteger 
 synchronization technique correctly and what could be done 
 better if we don't.
 
 Result: Trial showed that data was never corrupted, even in 
 heavily contended situations. Therefore our synchronization 
 with atomic integer does work. 
 
 In fact, when investigating an earlier version of TAtomicBuffer 
 with debugger and breaking execution flow of the the producer
 thread I found that the consumer threads stopped as well - 
 which shows that the atomic integer is indeed atomic and can 
 be used to synchronize multiple threads. This crude break trial 
 wouldn't work with the present version of TAtomicBuffer. 
 The present version won't block the high priority thread when 
 the low priority thread gets blocked. To enable detection of 
 blockages of the low priority thread we now have an underrun 
 counter which clients can query 
 (<code>TAtomicBuffer#GetNumUnderruns()</code>). 
 If everything works, the underrun counter should stay at zero value.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>peter</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.TConsumer.html" title="class in ppm_java._dev.concept.trial.TAtomicBuffer">TDev_Trial_AtomicBuffer_Contention_01.TConsumer</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.TProducer.html" title="class in ppm_java._dev.concept.trial.TAtomicBuffer">TDev_Trial_AtomicBuffer_Contention_01.TProducer</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#gkNNums">gkNNums</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#gkNRunsConsumer">gkNRunsConsumer</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#gkNRunsProducer">gkNRunsProducer</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#gLock">gLock</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.util.concurrent.atomic.AtomicInteger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#gNConsumersRunning">gNConsumersRunning</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.util.concurrent.atomic.AtomicInteger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#gNProducersRunning">gNProducersRunning</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#TDev_Trial_AtomicBuffer_Contention_01--">TDev_Trial_AtomicBuffer_Contention_01</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#Z:Z_RunTest-java.lang.String-int-int-ppm_java._aux.storage.TAtomicBuffer.ECopyPolicy-">_RunTest</a></span>(java.lang.String&nbsp;comment,
        int&nbsp;nProducers,
        int&nbsp;nConsumers,
        <a href="../../../../../ppm_java/_aux/storage/TAtomicBuffer.ECopyPolicy.html" title="enum in ppm_java._aux.storage">TAtomicBuffer.ECopyPolicy</a>&nbsp;cPol)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="gkNNums">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gkNNums</h4>
<pre>private static final&nbsp;int gkNNums</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#ppm_java._dev.concept.trial.TAtomicBuffer.TDev_Trial_AtomicBuffer_Contention_01.gkNNums">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="gkNRunsConsumer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gkNRunsConsumer</h4>
<pre>private static final&nbsp;int gkNRunsConsumer</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#ppm_java._dev.concept.trial.TAtomicBuffer.TDev_Trial_AtomicBuffer_Contention_01.gkNRunsConsumer">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="gkNRunsProducer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gkNRunsProducer</h4>
<pre>private static final&nbsp;int gkNRunsProducer</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#ppm_java._dev.concept.trial.TAtomicBuffer.TDev_Trial_AtomicBuffer_Contention_01.gkNRunsProducer">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="gLock">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gLock</h4>
<pre>private static&nbsp;java.lang.Object gLock</pre>
</li>
</ul>
<a name="gNConsumersRunning">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gNConsumersRunning</h4>
<pre>private static&nbsp;java.util.concurrent.atomic.AtomicInteger gNConsumersRunning</pre>
</li>
</ul>
<a name="gNProducersRunning">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>gNProducersRunning</h4>
<pre>private static&nbsp;java.util.concurrent.atomic.AtomicInteger gNProducersRunning</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TDev_Trial_AtomicBuffer_Contention_01--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TDev_Trial_AtomicBuffer_Contention_01</h4>
<pre>public&nbsp;TDev_Trial_AtomicBuffer_Contention_01()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - </dd>
</dl>
</li>
</ul>
<a name="Z:Z_RunTest-java.lang.String-int-int-ppm_java._aux.storage.TAtomicBuffer.ECopyPolicy-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>_RunTest</h4>
<pre>private static&nbsp;void&nbsp;_RunTest(java.lang.String&nbsp;comment,
                             int&nbsp;nProducers,
                             int&nbsp;nConsumers,
                             <a href="../../../../../ppm_java/_aux/storage/TAtomicBuffer.ECopyPolicy.html" title="enum in ppm_java._aux.storage">TAtomicBuffer.ECopyPolicy</a>&nbsp;cPol)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TDev_Trial_AtomicBuffer_Contention_01.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.TConsumer.html" title="class in ppm_java._dev.concept.trial.TAtomicBuffer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ppm_java/_dev/concept/trial/TAtomicBuffer/TDev_Trial_AtomicBuffer_Contention_01.html" target="_top">Frames</a></li>
<li><a href="TDev_Trial_AtomicBuffer_Contention_01.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
