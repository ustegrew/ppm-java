<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ppm-java: TAtomicBuffer Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../custom-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ppm-java
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A PPM prototype</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="../../d1/d8d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TAtomicBuffer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An atomic-access wrapper around a <code>FloatBuffer</code>.  
 <a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for TAtomicBuffer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d40/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer__inherit__graph.svg" width="152" height="523"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for TAtomicBuffer:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d9/d5a/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3ffffec22f4471396095036d69de7b9f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3ffffec22f4471396095036d69de7b9f">TAtomicBuffer</a> ()</td></tr>
<tr class="memdesc:a3ffffec22f4471396095036d69de7b9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new atomic buffer with default policies:  <a href="#a3ffffec22f4471396095036d69de7b9f">More...</a><br/></td></tr>
<tr class="separator:a3ffffec22f4471396095036d69de7b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf06889794a6359d316c74f459bcf516"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#adf06889794a6359d316c74f459bcf516">TAtomicBuffer</a> (<a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> copyPolicy)</td></tr>
<tr class="memdesc:adf06889794a6359d316c74f459bcf516"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new atomic buffer with a custom <a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> and default <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">EAtomicBuffer_IfInvalidPolicy#kReturnEmpty</a>.  <a href="#adf06889794a6359d316c74f459bcf516">More...</a><br/></td></tr>
<tr class="separator:adf06889794a6359d316c74f459bcf516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde223e176250a2e35dda19601bceee6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#abde223e176250a2e35dda19601bceee6">TAtomicBuffer</a> (<a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> copyPolicy, <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a> ifInvalidPolicy)</td></tr>
<tr class="memdesc:abde223e176250a2e35dda19601bceee6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new atomic buffer with a custom <a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> and default <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">EAtomicBuffer_IfInvalidPolicy#kReturnEmpty</a>.  <a href="#abde223e176250a2e35dda19601bceee6">More...</a><br/></td></tr>
<tr class="separator:abde223e176250a2e35dda19601bceee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5304a4896e4657eea0f3c7f9332bf3fd"><td class="memItemLeft" align="right" valign="top">FloatBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a5304a4896e4657eea0f3c7f9332bf3fd">Get</a> ()</td></tr>
<tr class="memdesc:a5304a4896e4657eea0f3c7f9332bf3fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the newest sample data.  <a href="#a5304a4896e4657eea0f3c7f9332bf3fd">More...</a><br/></td></tr>
<tr class="separator:a5304a4896e4657eea0f3c7f9332bf3fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c2545e4d5b2f7df92921ca0f405f4b"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a59c2545e4d5b2f7df92921ca0f405f4b">IsLocked</a> ()</td></tr>
<tr class="memdesc:a59c2545e4d5b2f7df92921ca0f405f4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <code>true</code> if the critical section is locked.  <a href="#a59c2545e4d5b2f7df92921ca0f405f4b">More...</a><br/></td></tr>
<tr class="separator:a59c2545e4d5b2f7df92921ca0f405f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dec543f05539426fd9350f02b3a56d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3dec543f05539426fd9350f02b3a56d7">Set</a> (FloatBuffer fb)</td></tr>
<tr class="memdesc:a3dec543f05539426fd9350f02b3a56d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the new sample chunk.  <a href="#a3dec543f05539426fd9350f02b3a56d7">More...</a><br/></td></tr>
<tr class="separator:a3dec543f05539426fd9350f02b3a56d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a445521dc829f33c6c7ed89c44632702f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a445521dc829f33c6c7ed89c44632702f">StatsClear</a> ()</td></tr>
<tr class="memdesc:a445521dc829f33c6c7ed89c44632702f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the associated runtime statistics.  <a href="#a445521dc829f33c6c7ed89c44632702f">More...</a><br/></td></tr>
<tr class="separator:a445521dc829f33c6c7ed89c44632702f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac16faca0de31c1f731bae164f280c144"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dc0/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer___stats.html">TAtomicBuffer_Stats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac16faca0de31c1f731bae164f280c144">StatsGet</a> ()</td></tr>
<tr class="separator:ac16faca0de31c1f731bae164f280c144"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac00f83154af73418afa968577fcd2aa8"><td class="memItemLeft" align="right" valign="top">FloatBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac00f83154af73418afa968577fcd2aa8">_DataGet</a> (boolean doCopy)</td></tr>
<tr class="memdesc:ac00f83154af73418afa968577fcd2aa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">An internal work method: Retrieves (a deep copy of) the newest sample chunk, or empty chunk, resp.  <a href="#ac00f83154af73418afa968577fcd2aa8">More...</a><br/></td></tr>
<tr class="separator:ac00f83154af73418afa968577fcd2aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae60ae6a71a8344f29d5f0fb9411c66be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ae60ae6a71a8344f29d5f0fb9411c66be">_DataSet</a> (FloatBuffer fb, boolean doCopy)</td></tr>
<tr class="memdesc:ae60ae6a71a8344f29d5f0fb9411c66be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store (a copy of the) new sample chunk, whether the consumer collected or not.  <a href="#ae60ae6a71a8344f29d5f0fb9411c66be">More...</a><br/></td></tr>
<tr class="separator:ae60ae6a71a8344f29d5f0fb9411c66be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09e17a8ac5f90d1659762c06a3798c64"><td class="memItemLeft" align="right" valign="top">FloatBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a09e17a8ac5f90d1659762c06a3798c64">_GetDeepCopy</a> (FloatBuffer fb)</td></tr>
<tr class="memdesc:a09e17a8ac5f90d1659762c06a3798c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a deep copy of the passed float buffer (for copy-on-write semantics).  <a href="#a09e17a8ac5f90d1659762c06a3798c64">More...</a><br/></td></tr>
<tr class="separator:a09e17a8ac5f90d1659762c06a3798c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6641cf5b417b177212042879e91db034"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a6641cf5b417b177212042879e91db034">_Init</a> (<a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> copyPolicy, <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a> ifInvalidPolicy)</td></tr>
<tr class="memdesc:a6641cf5b417b177212042879e91db034"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common initialization method - used by the various cTors.  <a href="#a6641cf5b417b177212042879e91db034">More...</a><br/></td></tr>
<tr class="separator:a6641cf5b417b177212042879e91db034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60fe7aa6d1a53dab132be5ecc82d668e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a60fe7aa6d1a53dab132be5ecc82d668e">_Lock</a> ()</td></tr>
<tr class="memdesc:a60fe7aa6d1a53dab132be5ecc82d668e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definitely acquire the lock on the critical section (spin lock, as it's merry-go-round until lock has been acquired).  <a href="#a60fe7aa6d1a53dab132be5ecc82d668e">More...</a><br/></td></tr>
<tr class="separator:a60fe7aa6d1a53dab132be5ecc82d668e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd55dd250854d9c48b81bda879e3d16"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1dd55dd250854d9c48b81bda879e3d16">_TryLock</a> ()</td></tr>
<tr class="memdesc:a1dd55dd250854d9c48b81bda879e3d16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tentatively try to lock the critical section.  <a href="#a1dd55dd250854d9c48b81bda879e3d16">More...</a><br/></td></tr>
<tr class="separator:a1dd55dd250854d9c48b81bda879e3d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9f36f97f1d8af33e8f50dce5153568"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">_Unlock</a> ()</td></tr>
<tr class="memdesc:a4e9f36f97f1d8af33e8f50dce5153568"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definitely unlock the critical section (spin lock, as it's merry-go-round until lock has been released).  <a href="#a4e9f36f97f1d8af33e8f50dce5153568">More...</a><br/></td></tr>
<tr class="separator:a4e9f36f97f1d8af33e8f50dce5153568"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3acdd8b9e1b435362f88f56c0ae3c373"><td class="memItemLeft" align="right" valign="top">FloatBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a></td></tr>
<tr class="memdesc:a3acdd8b9e1b435362f88f56c0ae3c373"><td class="mdescLeft">&#160;</td><td class="mdescRight">The underlying data container.  <a href="#a3acdd8b9e1b435362f88f56c0ae3c373">More...</a><br/></td></tr>
<tr class="separator:a3acdd8b9e1b435362f88f56c0ae3c373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a40b115012a9eb8e658206aa8ff8a12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">fCopyPolicy</a></td></tr>
<tr class="memdesc:a9a40b115012a9eb8e658206aa8ff8a12"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a>.  <a href="#a9a40b115012a9eb8e658206aa8ff8a12">More...</a><br/></td></tr>
<tr class="separator:a9a40b115012a9eb8e658206aa8ff8a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca39d349272512ea787274c201f0c84e"><td class="memItemLeft" align="right" valign="top">AtomicInteger&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#aca39d349272512ea787274c201f0c84e">fFlag</a></td></tr>
<tr class="memdesc:aca39d349272512ea787274c201f0c84e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The lock.  <a href="#aca39d349272512ea787274c201f0c84e">More...</a><br/></td></tr>
<tr class="separator:aca39d349272512ea787274c201f0c84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9249c09bcb9e0865519b11f122c85d"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">fHasBeenCollected</a></td></tr>
<tr class="memdesc:a1d9249c09bcb9e0865519b11f122c85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating whether the data in <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a> has been collected.  <a href="#a1d9249c09bcb9e0865519b11f122c85d">More...</a><br/></td></tr>
<tr class="separator:a1d9249c09bcb9e0865519b11f122c85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac160d3eb88f7a2bf3ea6e6a02a05446f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">fIfInvalidPolicy</a></td></tr>
<tr class="memdesc:ac160d3eb88f7a2bf3ea6e6a02a05446f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a>.  <a href="#ac160d3eb88f7a2bf3ea6e6a02a05446f">More...</a><br/></td></tr>
<tr class="separator:ac160d3eb88f7a2bf3ea6e6a02a05446f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab218c6c5fd42c55b8fbb1c63e98ceea6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dc0/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer___stats.html">TAtomicBuffer_Stats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ab218c6c5fd42c55b8fbb1c63e98ceea6">fStats</a></td></tr>
<tr class="memdesc:ab218c6c5fd42c55b8fbb1c63e98ceea6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The runtime statistics.  <a href="#ab218c6c5fd42c55b8fbb1c63e98ceea6">More...</a><br/></td></tr>
<tr class="separator:ab218c6c5fd42c55b8fbb1c63e98ceea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a73ad967d88c8f16ab4d42c76d1a42bd9"><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a73ad967d88c8f16ab4d42c76d1a42bd9">gkLocked</a> = 1</td></tr>
<tr class="memdesc:a73ad967d88c8f16ab4d42c76d1a42bd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag value: A thread acquired the lock.  <a href="#a73ad967d88c8f16ab4d42c76d1a42bd9">More...</a><br/></td></tr>
<tr class="separator:a73ad967d88c8f16ab4d42c76d1a42bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ab7cceff88be34913ac3140ed22a40"><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">gkUnlocked</a> = 0</td></tr>
<tr class="memdesc:af6ab7cceff88be34913ac3140ed22a40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag value: Buffer can be accessed.  <a href="#af6ab7cceff88be34913ac3140ed22a40">More...</a><br/></td></tr>
<tr class="separator:af6ab7cceff88be34913ac3140ed22a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An atomic-access wrapper around a <code>FloatBuffer</code>. </p>
<p>Designed for situations where we need to transport data between a high priority thread and a low priority thread in a producer-consumer scenario. Example scenario: A thread operating audio hardware sends audio sample data to another thread updating the GUI. The audio hardware thread cannot afford to be blocked, hence has high priority. The GUI thread isn't time critical, and we can afford to have it loose some data. </p>
<p><br/>
</p>
<p>The <code><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html" title="An atomic-access wrapper around a FloatBuffer. ">TAtomicBuffer</a></code> guarantees that data can be passed from (to) a high priority thread within a fixed (short) time without blocking it. This comes at a cost - the associated low priority thread does not have the guarantee that all data actually reaches it - in highly contended situations the <code><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html" title="An atomic-access wrapper around a FloatBuffer. ">TAtomicBuffer</a></code> would simply drop data where the low priority thread cannot keep up. If the low priority thread can't keep up with the streaming data it can't make full use of the stream anyway, so this seemed to be the best solution for data in contention situations. </p>
<p><br/>
</p>
<p>The <code><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html" title="An atomic-access wrapper around a FloatBuffer. ">TAtomicBuffer</a></code> copies the incoming data frames before they are passed on to the consumer. This is to protect the producer. If we pass on uncopied data frames and the consumer side does changes to the data then those changes would be seen on the producer side as well and cause unforeseen side effects and hard to track down errors. The extra protection comes with a performance penalty as the copying costs time. To protect the time critical thread from the performance loss we can set the time point at which the data is copied. If the producer is the time critical we copy when the consumer fetches. If the consumer is time critical we copy when the producer sets it. In some situations the data copy may be unnecessary in which case we can instruct the atomic buffer to omit any data copying. However, due to the real possibility of data corruption the data must then be copied separately, either on the producer or on the consumer side. The copy actions can be set at construction time via the <code>copyPolicy</code> parameter.</p>
<p>To monitor the quality of the data flow we offer various counters which can be queried by all parties (all <a class="el" href="../../">clearable</a>}: </p>
<p><br/>
</p>
<ul>
<li>
Overrun counter: Increments each time the producer pushes a new packet whilst an old packet still awaits collection by the consumer. A steady increase of the overruns indicates that the consumer can't keep up with the producer and looses packets. </li>
<li>
Underrun counter: Increments each time the consumer requests a packet whilst none has been pushed since the last collection. A steady increase of underruns indicates that the producer can't keep up with the consumer. </li>
<li>
Contention counter: Increments each time the producer and the consumer are both trying to acquire access to the buffer at the same time. A steady increase of the contentions indicates that both, producer and consumer, are too aggressive trying to set and get data. </li>
</ul>
<p><br/>
</p>
<p>Clients can use the underrun and overrun counters for automatic dropout compensation. For example, a low priority consumer thread can, with each cycle: </p>
<ul>
<li>
read overrun and underrun counts </li>
<li>
compute the difference: <code>d = nOver - nUnder</code>. If <code>d</code> is zero: All is well. If it's negative: Underruns. If it's positive: Overruns. </li>
<li>
then compensate by adjusting the time to the next cycle: </li>
<li>
<ul>
<li>
<code>d == 0</code>: No adjustment. </li>
<li>
<code>d &lt; 0</code>: Underruns! Decrease read frequency =&gt; Increase cycle time by a fixed number of milliseconds. </li>
<li>
<code>d &gt; 0</code>: Overruns! Increase read frequency =&gt; Decrease cycle time by a fixed number of milliseconds. </li>
</ul>
</li>
</ul>
<p><br/>
</p>
<p>If the contention counter has a steep rise then both, the producer and consumer are too aggressively trying to set and read data. As a mitigation strategy the party with the lower priority must be forced to yield whilst the higher priority party has the critical section. You can use the <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a59c2545e4d5b2f7df92921ca0f405f4b">IsLocked()</a> method for that: </p>
<p><br/>
</p>
<pre>
while (myBuffer.IsLocked()) 
{
    try 
    {
        Thread.sleep (2);
    } catch (ThatInterruptedExceptionISeeNoUseFor e){}
}
</pre> <p><br/>
</p>
<p>This is not a pretty solution, but it works - best use sparingly, if you have to. </p>
<p><br/>
</p>
<p>Don't assume the counters are precise. Overall access to the counters isn't thread safe (it seemed overkill to implement that, too). Whilst each counter is using an atomic integer (and should be thread safe by itself), we still can have scenarios such as one thread incrementing the underrun counter whilst another thread reads the overrun counter. Due to lack of overall counter thread safety the counters can only serve as guideline to assess the various reasons for dropped data. Them counters aren't brilliant, but good enough for simple diagnosis. </p>
<p><br/>
</p>
<p>Clients can customize what's returned to the consumer thread when no valid data is available upon call to <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a5304a4896e4657eea0f3c7f9332bf3fd">Get()</a>. Default is to return an empty sample chunk (in effect saying - zero samples available). But it means that for every invalid <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a5304a4896e4657eea0f3c7f9332bf3fd">Get()</a> call we create a new empty <a class="el" href="../../">FloatBuffer</a> which doesn't really feel that good. Therefore there's also the possibility to have <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a5304a4896e4657eea0f3c7f9332bf3fd">Get()</a> return <code>null</code> which allows consumers to operate in a similar fashion as it's done with <a class="el" href="../../">AtomicInteger#compareAndSet(int, int)</a>: </p>
<p><br/>
</p>
<pre>
// At some place: 
<a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html" title="An atomic-access wrapper around a FloatBuffer. ">TAtomicBuffer</a> myBuf = new <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html" title="An atomic-access wrapper around a FloatBuffer. ">TAtomicBuffer</a> (ECopyPolicy.kCopyOnGet, EIfInvalidPolicy.kReturnNull)</pre><pre>// Inside consumer thread
do
{
    chunk = myBuf.Get ();
    try {
    Thread.sleep (yieldTime); // Can be a few mSec so the processor doesn't grind to a halt.
    } catch (ThatInterruptedExceptionISeeNoUseFor e){}
} while (chunk == null);</pre><pre>// Now do nifty stuff with the sample chunk. 
</pre> <p><br/>
</p>
<p>For synchronization between producer and consumer the <code><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html" title="An atomic-access wrapper around a FloatBuffer. ">TAtomicBuffer</a></code> makes use of an <a class="el" href="../../">AtomicInteger</a> flag; more specifically, the <a class="el" href="../../">AtomicInteger#compareAndSet(int, int)</a> method. This method is guaranteed to be atomic, i.e. allow access to the enclosed integer only by a single thread at a time without blocking the other threads. We don't use the standard <code>synchronized</code> mutex as that one does block threads which haven't acquired it. This can block the time critical thread, leading to priority inversion (where the low priority thread blocks the high priority one). Additionally, on some platforms the <code>synchronized</code> primitive is quite costly, i.e. time consuming. The <a class="el" href="../../">AtomicInteger#compareAndSet(int, int)</a> is much faster.</p>
<dl class="section author"><dt>Author</dt><dd>Peter Hoppe </dd></dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00171">171</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3ffffec22f4471396095036d69de7b9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html">TAtomicBuffer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new atomic buffer with default policies: </p>
<ul>
<li>
<a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#aa737baa1ca414ba79176cee0b157c915">EAtomicBuffer_CopyPolicy#kCopyOnSet</a> </li>
<li>
<a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">EAtomicBuffer_IfInvalidPolicy#kReturnEmpty</a> </li>
</ul>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00221">221</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>, <a class="el" href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00052">EAtomicBuffer_CopyPolicy.kCopyOnSet</a>, and <a class="el" href="../../d2/db0/_e_atomic_buffer___if_invalid_policy_8java_source.html#l00042">EAtomicBuffer_IfInvalidPolicy.kReturnEmpty</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a6641cf5b417b177212042879e91db034">_Init</a> (EAtomicBuffer_CopyPolicy.kCopyOnSet, EAtomicBuffer_IfInvalidPolicy.kReturnEmpty);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a6641cf5b417b177212042879e91db034"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a6641cf5b417b177212042879e91db034">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._Init</a></div><div class="ttdeci">void _Init(EAtomicBuffer_CopyPolicy copyPolicy, EAtomicBuffer_IfInvalidPolicy ifInvalidPolicy)</div><div class="ttdoc">Common initialization method - used by the various cTors. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer.java:544</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a3ffffec22f4471396095036d69de7b9f_cgraph.svg" width="214" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="adf06889794a6359d316c74f459bcf516"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html">TAtomicBuffer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a>&#160;</td>
          <td class="paramname"><em>copyPolicy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new atomic buffer with a custom <a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> and default <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">EAtomicBuffer_IfInvalidPolicy#kReturnEmpty</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">copyPolicy</td><td>The desired copy policy. Determines which thread is treated as high priority thread, and which one as low priority thread. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00234">234</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>, and <a class="el" href="../../d2/db0/_e_atomic_buffer___if_invalid_policy_8java_source.html#l00042">EAtomicBuffer_IfInvalidPolicy.kReturnEmpty</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a6641cf5b417b177212042879e91db034">_Init</a> (copyPolicy, EAtomicBuffer_IfInvalidPolicy.kReturnEmpty);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a6641cf5b417b177212042879e91db034"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a6641cf5b417b177212042879e91db034">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._Init</a></div><div class="ttdeci">void _Init(EAtomicBuffer_CopyPolicy copyPolicy, EAtomicBuffer_IfInvalidPolicy ifInvalidPolicy)</div><div class="ttdoc">Common initialization method - used by the various cTors. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer.java:544</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_adf06889794a6359d316c74f459bcf516_cgraph.svg" width="214" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="abde223e176250a2e35dda19601bceee6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html">TAtomicBuffer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a>&#160;</td>
          <td class="paramname"><em>copyPolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a>&#160;</td>
          <td class="paramname"><em>ifInvalidPolicy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new atomic buffer with a custom <a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> and default <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">EAtomicBuffer_IfInvalidPolicy#kReturnEmpty</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">copyPolicy</td><td>The desired copy policy. Determines which thread is treated as high priority thread, and which one as low priority thread. </td></tr>
    <tr><td class="paramname">ifInvalidPolicy</td><td>The desired invalid data policy. Determines what is returned to the consumer thread when there's no valid data. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00250">250</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a6641cf5b417b177212042879e91db034">_Init</a> (copyPolicy, ifInvalidPolicy);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a6641cf5b417b177212042879e91db034"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a6641cf5b417b177212042879e91db034">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._Init</a></div><div class="ttdeci">void _Init(EAtomicBuffer_CopyPolicy copyPolicy, EAtomicBuffer_IfInvalidPolicy ifInvalidPolicy)</div><div class="ttdoc">Common initialization method - used by the various cTors. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer.java:544</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_abde223e176250a2e35dda19601bceee6_cgraph.svg" width="214" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac00f83154af73418afa968577fcd2aa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FloatBuffer _DataGet </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>doCopy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An internal work method: Retrieves (a deep copy of) the newest sample chunk, or empty chunk, resp. </p>
<p><code>null</code> if there's stale data. If there was just stale data we will increment the underrun counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doCopy</td><td>Return a deep copy, not the original FloatBuffer object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The (deep copy of the) latest sample chunk. </dd></dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00436">436</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00517">TAtomicBuffer._GetDeepCopy()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00186">TAtomicBuffer.fBuffer</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00202">TAtomicBuffer.fHasBeenCollected</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00207">TAtomicBuffer.fIfInvalidPolicy</a>, and <a class="el" href="../../d2/db0/_e_atomic_buffer___if_invalid_policy_8java_source.html#l00042">EAtomicBuffer_IfInvalidPolicy.kReturnEmpty</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00268">TAtomicBuffer.Get()</a>.</p>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        FloatBuffer ret;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">         * Note, it&#39;s mandatory to NEVER do: fBuffer=FloatBuffer.allocate (0)! </span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">         * Otherwise, if doCopy == false, we will set ret=fBuffer,</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">         * then fBuffer=FloatBuffer.allocate(0) which is in effect </span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">         * ret=FloatBuffer.allocate (0) since ret==fBuffer! Thus the consumer </span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">         * will receive an empty data set even though there was valid data!</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">         * However we neither want to pass on stale data to the consumer. </span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">         * Our compromise is: When data is stale, we create an empty data </span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">         * set or null and pass that back to the consumer.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">if</span> (! <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">fHasBeenCollected</a>)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        {   <span class="comment">/* Ah! Some fresh data is ready to collect! */</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordflow">if</span> (doCopy)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            {   <span class="comment">/* The consumer thread is low priority. */</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                ret = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a09e17a8ac5f90d1659762c06a3798c64">_GetDeepCopy</a> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a>);                           <span class="comment">/* [100] */</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            {   <span class="comment">/* The consumer is high priority - can&#39;t afford to copy. */</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                ret = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        {   <span class="comment">/* Ouch! We are sitting on stale data! Increment underrun </span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">               counter and return empty chunk or null. */</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            fStats.IncrementUnderruns ();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">fIfInvalidPolicy</a> == EAtomicBuffer_IfInvalidPolicy.<a class="code" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">kReturnEmpty</a>)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                ret = FloatBuffer.allocate (0);    </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                ret = null;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">/* Mark data as stale. For simplicity we ignore whatever fHasBeenCollected was before */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">fHasBeenCollected</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="ttc" id="enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy_html_a24ef779386441c8a1f80205c76a8dcbf"><div class="ttname"><a href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">ppm_java.util.storage.atomicBuffer.EAtomicBuffer_IfInvalidPolicy.kReturnEmpty</a></div><div class="ttdeci">kReturnEmpty</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db0/_e_atomic_buffer___if_invalid_policy_8java_source.html#l00042">EAtomicBuffer_IfInvalidPolicy.java:42</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a1d9249c09bcb9e0865519b11f122c85d"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fHasBeenCollected</a></div><div class="ttdeci">boolean fHasBeenCollected</div><div class="ttdoc">Flag indicating whether the data in fBuffer has been collected. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00202">TAtomicBuffer.java:202</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_ac160d3eb88f7a2bf3ea6e6a02a05446f"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fIfInvalidPolicy</a></div><div class="ttdeci">EAtomicBuffer_IfInvalidPolicy fIfInvalidPolicy</div><div class="ttdoc">The EAtomicBuffer_IfInvalidPolicy. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00207">TAtomicBuffer.java:207</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a3acdd8b9e1b435362f88f56c0ae3c373"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fBuffer</a></div><div class="ttdeci">FloatBuffer fBuffer</div><div class="ttdoc">The underlying data container. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00186">TAtomicBuffer.java:186</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a09e17a8ac5f90d1659762c06a3798c64"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a09e17a8ac5f90d1659762c06a3798c64">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._GetDeepCopy</a></div><div class="ttdeci">FloatBuffer _GetDeepCopy(FloatBuffer fb)</div><div class="ttdoc">Creates a deep copy of the passed float buffer (for copy-on-write semantics). </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00517">TAtomicBuffer.java:517</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_ac00f83154af73418afa968577fcd2aa8_cgraph.svg" width="251" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_ac00f83154af73418afa968577fcd2aa8_icgraph.svg" width="182" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae60ae6a71a8344f29d5f0fb9411c66be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _DataSet </td>
          <td>(</td>
          <td class="paramtype">FloatBuffer&#160;</td>
          <td class="paramname"><em>fb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>doCopy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store (a copy of the) new sample chunk, whether the consumer collected or not. </p>
<p>If there was stale data (i.e. uncollected since last _DataSet(..) we will increment the overrun counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fb</td><td>The sample chunk to be stored. </td></tr>
    <tr><td class="paramname">doCopy</td><td>If <code>true</code>, store a deep copy instead of the original. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00490">490</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00517">TAtomicBuffer._GetDeepCopy()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00186">TAtomicBuffer.fBuffer</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00202">TAtomicBuffer.fHasBeenCollected</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00362">TAtomicBuffer.Set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> (doCopy)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        {   <span class="comment">/* The producer thread is low priority. */</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a> = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a09e17a8ac5f90d1659762c06a3798c64">_GetDeepCopy</a> (fb);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        {   <span class="comment">/* The producer is high priority - can&#39;t afford to copy. */</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a> = fb;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> (! <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">fHasBeenCollected</a>)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        {   <span class="comment">/* Ouch! We were sitting on stale data which means the consumer </span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">               wasn&#39;t able to collect in time. Increment the overrun counter */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            fStats.IncrementOverruns ();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="comment">/* Mark data as fresh. For simplicity we ignore whatever fHasBeenCollected was before */</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">fHasBeenCollected</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a1d9249c09bcb9e0865519b11f122c85d"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fHasBeenCollected</a></div><div class="ttdeci">boolean fHasBeenCollected</div><div class="ttdoc">Flag indicating whether the data in fBuffer has been collected. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00202">TAtomicBuffer.java:202</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a3acdd8b9e1b435362f88f56c0ae3c373"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fBuffer</a></div><div class="ttdeci">FloatBuffer fBuffer</div><div class="ttdoc">The underlying data container. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00186">TAtomicBuffer.java:186</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a09e17a8ac5f90d1659762c06a3798c64"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a09e17a8ac5f90d1659762c06a3798c64">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._GetDeepCopy</a></div><div class="ttdeci">FloatBuffer _GetDeepCopy(FloatBuffer fb)</div><div class="ttdoc">Creates a deep copy of the passed float buffer (for copy-on-write semantics). </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00517">TAtomicBuffer.java:517</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_ae60ae6a71a8344f29d5f0fb9411c66be_cgraph.svg" width="248" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_ae60ae6a71a8344f29d5f0fb9411c66be_icgraph.svg" width="179" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a09e17a8ac5f90d1659762c06a3798c64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FloatBuffer _GetDeepCopy </td>
          <td>(</td>
          <td class="paramtype">FloatBuffer&#160;</td>
          <td class="paramname"><em>fb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a deep copy of the passed float buffer (for copy-on-write semantics). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fb</td><td>The <a class="el" href="../../">FloatBuffer</a> to be copied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The deep copy. Essentially, this is a new (separate) object. </dd></dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00517">517</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00436">TAtomicBuffer._DataGet()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00490">TAtomicBuffer._DataSet()</a>.</p>
<div class="fragment"><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordtype">int</span>         i;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordtype">int</span>         nNums;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordtype">float</span>       v;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        FloatBuffer ret;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        nNums   = fb.capacity ();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        ret     = FloatBuffer.allocate (nNums);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">if</span> (nNums &gt;= 1)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; nNums; i++)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                v = fb.get (i);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                ret.put (v);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div>
</div><!-- fragment -->
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a09e17a8ac5f90d1659762c06a3798c64_icgraph.svg" width="342" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6641cf5b417b177212042879e91db034"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a>&#160;</td>
          <td class="paramname"><em>copyPolicy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a>&#160;</td>
          <td class="paramname"><em>ifInvalidPolicy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Common initialization method - used by the various cTors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">copyPolicy</td><td>The copy policy. </td></tr>
    <tr><td class="paramname">ifInvalidPolicy</td><td>The "what do I return if no good data" policy. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">544</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00186">TAtomicBuffer.fBuffer</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00191">TAtomicBuffer.fCopyPolicy</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00196">TAtomicBuffer.fFlag</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00202">TAtomicBuffer.fHasBeenCollected</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00207">TAtomicBuffer.fIfInvalidPolicy</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00212">TAtomicBuffer.fStats</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.gkUnlocked</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00221">TAtomicBuffer.TAtomicBuffer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ab218c6c5fd42c55b8fbb1c63e98ceea6">fStats</a>              = <span class="keyword">new</span> TAtomicBuffer_Stats ();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#aca39d349272512ea787274c201f0c84e">fFlag</a>               = <span class="keyword">new</span> AtomicInteger (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">gkUnlocked</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a>             = FloatBuffer.allocate (0);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">fCopyPolicy</a>         = copyPolicy;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">fIfInvalidPolicy</a>    = ifInvalidPolicy;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">fHasBeenCollected</a>   = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_af6ab7cceff88be34913ac3140ed22a40"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkUnlocked</a></div><div class="ttdeci">static final int gkUnlocked</div><div class="ttdoc">Flag value: Buffer can be accessed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.java:181</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a1d9249c09bcb9e0865519b11f122c85d"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1d9249c09bcb9e0865519b11f122c85d">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fHasBeenCollected</a></div><div class="ttdeci">boolean fHasBeenCollected</div><div class="ttdoc">Flag indicating whether the data in fBuffer has been collected. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00202">TAtomicBuffer.java:202</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_ab218c6c5fd42c55b8fbb1c63e98ceea6"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ab218c6c5fd42c55b8fbb1c63e98ceea6">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fStats</a></div><div class="ttdeci">TAtomicBuffer_Stats fStats</div><div class="ttdoc">The runtime statistics. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00212">TAtomicBuffer.java:212</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_ac160d3eb88f7a2bf3ea6e6a02a05446f"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fIfInvalidPolicy</a></div><div class="ttdeci">EAtomicBuffer_IfInvalidPolicy fIfInvalidPolicy</div><div class="ttdoc">The EAtomicBuffer_IfInvalidPolicy. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00207">TAtomicBuffer.java:207</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_aca39d349272512ea787274c201f0c84e"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#aca39d349272512ea787274c201f0c84e">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fFlag</a></div><div class="ttdeci">AtomicInteger fFlag</div><div class="ttdoc">The lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00196">TAtomicBuffer.java:196</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a3acdd8b9e1b435362f88f56c0ae3c373"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fBuffer</a></div><div class="ttdeci">FloatBuffer fBuffer</div><div class="ttdoc">The underlying data container. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00186">TAtomicBuffer.java:186</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a9a40b115012a9eb8e658206aa8ff8a12"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fCopyPolicy</a></div><div class="ttdeci">EAtomicBuffer_CopyPolicy fCopyPolicy</div><div class="ttdoc">The EAtomicBuffer_CopyPolicy. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00191">TAtomicBuffer.java:191</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a6641cf5b417b177212042879e91db034_icgraph.svg" width="214" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a60fe7aa6d1a53dab132be5ecc82d668e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _Lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definitely acquire the lock on the critical section (spin lock, as it's merry-go-round until lock has been acquired). </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00558">558</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00176">TAtomicBuffer.gkLocked</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.gkUnlocked</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00268">TAtomicBuffer.Get()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00362">TAtomicBuffer.Set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordtype">boolean</span> isLocked;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            isLocked = fFlag.compareAndSet (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">gkUnlocked</a>, <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a73ad967d88c8f16ab4d42c76d1a42bd9">gkLocked</a>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        } <span class="keywordflow">while</span> (! isLocked);                                           <span class="comment">/* [120] */</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_af6ab7cceff88be34913ac3140ed22a40"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkUnlocked</a></div><div class="ttdeci">static final int gkUnlocked</div><div class="ttdoc">Flag value: Buffer can be accessed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.java:181</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a73ad967d88c8f16ab4d42c76d1a42bd9"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a73ad967d88c8f16ab4d42c76d1a42bd9">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkLocked</a></div><div class="ttdeci">static final int gkLocked</div><div class="ttdoc">Flag value: A thread acquired the lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00176">TAtomicBuffer.java:176</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a60fe7aa6d1a53dab132be5ecc82d668e_icgraph.svg" width="160" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1dd55dd250854d9c48b81bda879e3d16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean _TryLock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tentatively try to lock the critical section. </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if lock acquired, <code>false</code> if acquiring failed. </dd></dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00573">573</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00176">TAtomicBuffer.gkLocked</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.gkUnlocked</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00268">TAtomicBuffer.Get()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00362">TAtomicBuffer.Set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordtype">boolean</span> ret;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        ret = fFlag.compareAndSet (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">gkUnlocked</a>, <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a73ad967d88c8f16ab4d42c76d1a42bd9">gkLocked</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_af6ab7cceff88be34913ac3140ed22a40"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkUnlocked</a></div><div class="ttdeci">static final int gkUnlocked</div><div class="ttdoc">Flag value: Buffer can be accessed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.java:181</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a73ad967d88c8f16ab4d42c76d1a42bd9"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a73ad967d88c8f16ab4d42c76d1a42bd9">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkLocked</a></div><div class="ttdeci">static final int gkLocked</div><div class="ttdoc">Flag value: A thread acquired the lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00176">TAtomicBuffer.java:176</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a1dd55dd250854d9c48b81bda879e3d16_icgraph.svg" width="179" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4e9f36f97f1d8af33e8f50dce5153568"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _Unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definitely unlock the critical section (spin lock, as it's merry-go-round until lock has been released). </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00586">586</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00176">TAtomicBuffer.gkLocked</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.gkUnlocked</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00268">TAtomicBuffer.Get()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00362">TAtomicBuffer.Set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordtype">boolean</span> isUnlocked;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            isUnlocked = fFlag.compareAndSet (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a73ad967d88c8f16ab4d42c76d1a42bd9">gkLocked</a>, <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">gkUnlocked</a>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">while</span> (! isUnlocked);                                           <span class="comment">/* [120] */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_af6ab7cceff88be34913ac3140ed22a40"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkUnlocked</a></div><div class="ttdeci">static final int gkUnlocked</div><div class="ttdoc">Flag value: Buffer can be accessed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.java:181</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a73ad967d88c8f16ab4d42c76d1a42bd9"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a73ad967d88c8f16ab4d42c76d1a42bd9">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkLocked</a></div><div class="ttdeci">static final int gkLocked</div><div class="ttdoc">Flag value: A thread acquired the lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00176">TAtomicBuffer.java:176</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a4e9f36f97f1d8af33e8f50dce5153568_icgraph.svg" width="174" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5304a4896e4657eea0f3c7f9332bf3fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FloatBuffer Get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the newest sample data. </p>
<p>Meant for the consumer thread. Note that at some stage there's a deep copying; therefore we will never return the original <a class="el" href="../../">FloatBuffer</a> object. </p>
<p><br/>
</p>
<p>If there was no new sample data (i.e. stale data = that particular chunk has already been collected before) or if there was contention with the producer thread then we'll return either an empty sample chunk or null. See <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html">introduction</a> for further information.</p>
<dl class="section return"><dt>Returns</dt><dd>The newest sample data, or empty chunk, resp. <code>null</code>. </dd></dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00268">268</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00436">TAtomicBuffer._DataGet()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00558">TAtomicBuffer._Lock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00573">TAtomicBuffer._TryLock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00586">TAtomicBuffer._Unlock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00191">TAtomicBuffer.fCopyPolicy</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00207">TAtomicBuffer.fIfInvalidPolicy</a>, <a class="el" href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00051">EAtomicBuffer_CopyPolicy.kCopyOnGet</a>, <a class="el" href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00052">EAtomicBuffer_CopyPolicy.kCopyOnSet</a>, and <a class="el" href="../../d2/db0/_e_atomic_buffer___if_invalid_policy_8java_source.html#l00042">EAtomicBuffer_IfInvalidPolicy.kReturnEmpty</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordtype">boolean</span>         isLocked;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        FloatBuffer     ret;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">fCopyPolicy</a> == EAtomicBuffer_CopyPolicy.<a class="code" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#abe54e9d40bbaa9c6f734d207e855d3cb">kCopyOnGet</a>)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        {   <span class="comment">/* Consumer has low priority, i.e. can wait until the lock is free. */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a60fe7aa6d1a53dab132be5ecc82d668e">_Lock</a> ();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            ret = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac00f83154af73418afa968577fcd2aa8">_DataGet</a> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">_Unlock</a> ();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">fCopyPolicy</a> == EAtomicBuffer_CopyPolicy.<a class="code" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#aa737baa1ca414ba79176cee0b157c915">kCopyOnSet</a>)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        {   <span class="comment">/* Consumer has high priority, i.e. will give up trying if it can&#39;t acquire the lock */</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            isLocked = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1dd55dd250854d9c48b81bda879e3d16">_TryLock</a> ();                                     <span class="comment">/* [110] */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span> (isLocked)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                ret = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac00f83154af73418afa968577fcd2aa8">_DataGet</a> (<span class="keyword">false</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">_Unlock</a> ();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            {   <span class="comment">/* Consumer clashed with producer. Increment </span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">                   contention counter and return empty chunk </span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">                   or null. */</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                fStats.IncrementContentions ();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">fIfInvalidPolicy</a> == EAtomicBuffer_IfInvalidPolicy.<a class="code" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">kReturnEmpty</a>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    ret = FloatBuffer.allocate (0);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    ret = null;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="comment">/* No copying. This is dangerous, but sometimes necessary. </span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">             * Clients must make sure the producer or the consumer do</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">             * their own data copying. Since we can&#39;t tell who&#39;s </span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">             * high and who&#39;s low priority we treat this case as if both,</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">             * producer and consumer are high priority. */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            isLocked = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1dd55dd250854d9c48b81bda879e3d16">_TryLock</a> ();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">if</span> (isLocked)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                ret = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac00f83154af73418afa968577fcd2aa8">_DataGet</a> (<span class="keyword">false</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">_Unlock</a> ();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            {   <span class="comment">/* Consumer clashed with producer. Increment </span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">                contention counter and return empty chunk </span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">                or null. */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                fStats.IncrementContentions ();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">fIfInvalidPolicy</a> == EAtomicBuffer_IfInvalidPolicy.<a class="code" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">kReturnEmpty</a>)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    ret = FloatBuffer.allocate (0);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    ret = null;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a4e9f36f97f1d8af33e8f50dce5153568"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._Unlock</a></div><div class="ttdeci">void _Unlock()</div><div class="ttdoc">Definitely unlock the critical section (spin lock, as it&#39;s merry-go-round until lock has been release...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00586">TAtomicBuffer.java:586</a></div></div>
<div class="ttc" id="enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy_html_a24ef779386441c8a1f80205c76a8dcbf"><div class="ttname"><a href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html#a24ef779386441c8a1f80205c76a8dcbf">ppm_java.util.storage.atomicBuffer.EAtomicBuffer_IfInvalidPolicy.kReturnEmpty</a></div><div class="ttdeci">kReturnEmpty</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db0/_e_atomic_buffer___if_invalid_policy_8java_source.html#l00042">EAtomicBuffer_IfInvalidPolicy.java:42</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a1dd55dd250854d9c48b81bda879e3d16"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1dd55dd250854d9c48b81bda879e3d16">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._TryLock</a></div><div class="ttdeci">boolean _TryLock()</div><div class="ttdoc">Tentatively try to lock the critical section. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00573">TAtomicBuffer.java:573</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a60fe7aa6d1a53dab132be5ecc82d668e"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a60fe7aa6d1a53dab132be5ecc82d668e">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._Lock</a></div><div class="ttdeci">void _Lock()</div><div class="ttdoc">Definitely acquire the lock on the critical section (spin lock, as it&#39;s merry-go-round until lock has...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00558">TAtomicBuffer.java:558</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_ac160d3eb88f7a2bf3ea6e6a02a05446f"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac160d3eb88f7a2bf3ea6e6a02a05446f">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fIfInvalidPolicy</a></div><div class="ttdeci">EAtomicBuffer_IfInvalidPolicy fIfInvalidPolicy</div><div class="ttdoc">The EAtomicBuffer_IfInvalidPolicy. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00207">TAtomicBuffer.java:207</a></div></div>
<div class="ttc" id="enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy_html_aa737baa1ca414ba79176cee0b157c915"><div class="ttname"><a href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#aa737baa1ca414ba79176cee0b157c915">ppm_java.util.storage.atomicBuffer.EAtomicBuffer_CopyPolicy.kCopyOnSet</a></div><div class="ttdeci">kCopyOnSet</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00052">EAtomicBuffer_CopyPolicy.java:52</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_ac00f83154af73418afa968577fcd2aa8"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ac00f83154af73418afa968577fcd2aa8">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._DataGet</a></div><div class="ttdeci">FloatBuffer _DataGet(boolean doCopy)</div><div class="ttdoc">An internal work method: Retrieves (a deep copy of) the newest sample chunk, or empty chunk...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00436">TAtomicBuffer.java:436</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a9a40b115012a9eb8e658206aa8ff8a12"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fCopyPolicy</a></div><div class="ttdeci">EAtomicBuffer_CopyPolicy fCopyPolicy</div><div class="ttdoc">The EAtomicBuffer_CopyPolicy. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00191">TAtomicBuffer.java:191</a></div></div>
<div class="ttc" id="enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy_html_abe54e9d40bbaa9c6f734d207e855d3cb"><div class="ttname"><a href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#abe54e9d40bbaa9c6f734d207e855d3cb">ppm_java.util.storage.atomicBuffer.EAtomicBuffer_CopyPolicy.kCopyOnGet</a></div><div class="ttdeci">kCopyOnGet</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00051">EAtomicBuffer_CopyPolicy.java:51</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a5304a4896e4657eea0f3c7f9332bf3fd_cgraph.svg" width="342" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a59c2545e4d5b2f7df92921ca0f405f4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean IsLocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns <code>true</code> if the critical section is locked. </p>
<p>It's not thread-safe because by the time the result is returned the blocking thread may already have (un)locked the critical section. However, it's good enough to be used for automatic resolution of high contention situations. See the <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html">introduction</a> for an automated strategy to reduce contentions.</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the critical section is locked right now. </dd></dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00345">345</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.gkUnlocked</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordtype">int</span>     flag;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordtype">boolean</span> ret;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        flag = fFlag.getAndAdd (0);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        ret  = (flag == <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">gkUnlocked</a>); </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_af6ab7cceff88be34913ac3140ed22a40"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#af6ab7cceff88be34913ac3140ed22a40">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.gkUnlocked</a></div><div class="ttdeci">static final int gkUnlocked</div><div class="ttdoc">Flag value: Buffer can be accessed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">TAtomicBuffer.java:181</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3dec543f05539426fd9350f02b3a56d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Set </td>
          <td>(</td>
          <td class="paramtype">FloatBuffer&#160;</td>
          <td class="paramname"><em>fb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the new sample chunk. </p>
<p>If there is stale data it will be overwritten. Meant for the producer thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fb</td><td>Sample chunk to set. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00362">362</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00490">TAtomicBuffer._DataSet()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00558">TAtomicBuffer._Lock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00573">TAtomicBuffer._TryLock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00586">TAtomicBuffer._Unlock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00191">TAtomicBuffer.fCopyPolicy</a>, <a class="el" href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00051">EAtomicBuffer_CopyPolicy.kCopyOnGet</a>, and <a class="el" href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00052">EAtomicBuffer_CopyPolicy.kCopyOnSet</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordtype">boolean</span> isLocked;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">fCopyPolicy</a> == EAtomicBuffer_CopyPolicy.<a class="code" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#aa737baa1ca414ba79176cee0b157c915">kCopyOnSet</a>)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        {   <span class="comment">/* Producer has low priority, i.e. can wait until the lock is free. */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a60fe7aa6d1a53dab132be5ecc82d668e">_Lock</a> ();                                                   <span class="comment">/* [120] */</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ae60ae6a71a8344f29d5f0fb9411c66be">_DataSet</a> (fb, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">_Unlock</a> ();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">fCopyPolicy</a> == EAtomicBuffer_CopyPolicy.<a class="code" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#abe54e9d40bbaa9c6f734d207e855d3cb">kCopyOnGet</a>)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        {   <span class="comment">/* Producer has high priority, i.e. will give up trying if it can&#39;t acquire the lock */</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            isLocked = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1dd55dd250854d9c48b81bda879e3d16">_TryLock</a> ();                                     <span class="comment">/* [110] */</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">if</span> (isLocked)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ae60ae6a71a8344f29d5f0fb9411c66be">_DataSet</a> (fb, <span class="keyword">false</span>); </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">_Unlock</a> ();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                fStats.IncrementContentions ();                         <span class="comment">/* [130] */</span> </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        {   <span class="comment">/* No copying. This is dangerous, but sometimes necessary. </span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">             * Clients must make sure the producer or the consumer do</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">             * their own data copying. Since we can&#39;t tell who&#39;s </span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">             * high and who&#39;s low priority we treat this case as if both,</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">             * producer and consumer are high priority. */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            isLocked = <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1dd55dd250854d9c48b81bda879e3d16">_TryLock</a> ();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">if</span> (isLocked)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ae60ae6a71a8344f29d5f0fb9411c66be">_DataSet</a> (fb, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">_Unlock</a> ();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                fStats.IncrementContentions ();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a4e9f36f97f1d8af33e8f50dce5153568"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a4e9f36f97f1d8af33e8f50dce5153568">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._Unlock</a></div><div class="ttdeci">void _Unlock()</div><div class="ttdoc">Definitely unlock the critical section (spin lock, as it&#39;s merry-go-round until lock has been release...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00586">TAtomicBuffer.java:586</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_ae60ae6a71a8344f29d5f0fb9411c66be"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ae60ae6a71a8344f29d5f0fb9411c66be">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._DataSet</a></div><div class="ttdeci">void _DataSet(FloatBuffer fb, boolean doCopy)</div><div class="ttdoc">Store (a copy of the) new sample chunk, whether the consumer collected or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00490">TAtomicBuffer.java:490</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a1dd55dd250854d9c48b81bda879e3d16"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a1dd55dd250854d9c48b81bda879e3d16">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._TryLock</a></div><div class="ttdeci">boolean _TryLock()</div><div class="ttdoc">Tentatively try to lock the critical section. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00573">TAtomicBuffer.java:573</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a60fe7aa6d1a53dab132be5ecc82d668e"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a60fe7aa6d1a53dab132be5ecc82d668e">ppm_java.util.storage.atomicBuffer.TAtomicBuffer._Lock</a></div><div class="ttdeci">void _Lock()</div><div class="ttdoc">Definitely acquire the lock on the critical section (spin lock, as it&#39;s merry-go-round until lock has...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00558">TAtomicBuffer.java:558</a></div></div>
<div class="ttc" id="enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy_html_aa737baa1ca414ba79176cee0b157c915"><div class="ttname"><a href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#aa737baa1ca414ba79176cee0b157c915">ppm_java.util.storage.atomicBuffer.EAtomicBuffer_CopyPolicy.kCopyOnSet</a></div><div class="ttdeci">kCopyOnSet</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00052">EAtomicBuffer_CopyPolicy.java:52</a></div></div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_a9a40b115012a9eb8e658206aa8ff8a12"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a9a40b115012a9eb8e658206aa8ff8a12">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fCopyPolicy</a></div><div class="ttdeci">EAtomicBuffer_CopyPolicy fCopyPolicy</div><div class="ttdoc">The EAtomicBuffer_CopyPolicy. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00191">TAtomicBuffer.java:191</a></div></div>
<div class="ttc" id="enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy_html_abe54e9d40bbaa9c6f734d207e855d3cb"><div class="ttname"><a href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html#abe54e9d40bbaa9c6f734d207e855d3cb">ppm_java.util.storage.atomicBuffer.EAtomicBuffer_CopyPolicy.kCopyOnGet</a></div><div class="ttdeci">kCopyOnGet</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/_e_atomic_buffer___copy_policy_8java_source.html#l00051">EAtomicBuffer_CopyPolicy.java:51</a></div></div>
</div><!-- fragment -->
<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_a3dec543f05539426fd9350f02b3a56d7_cgraph.svg" width="339" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a445521dc829f33c6c7ed89c44632702f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StatsClear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the associated runtime statistics. </p>
<p>Not thread safe, but good enough to use for automatic compensation of problems.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d4/dc0/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer___stats.html" title="Runtime statistics of a TAtomicBuffer. ">TAtomicBuffer_Stats</a> </dd></dl>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00411">411</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>
<div class="fragment"><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        fStats.Clear ();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac16faca0de31c1f731bae164f280c144"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dc0/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer___stats.html">TAtomicBuffer_Stats</a> StatsGet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The associated runtime statistics. Not thread safe, but good enough to use for automatic compensation of problems.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="../../d4/dc0/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer___stats.html" title="Runtime statistics of a TAtomicBuffer. ">TAtomicBuffer_Stats</a> </dd></dl>

<p>Implements <a class="el" href="../../dc/dc0/interfaceppm__java_1_1typelib_1_1_i_stat_enabled.html#a83b615f3dd1ee43c3e4c948f32345dd2">IStatEnabled</a>.</p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00423">423</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>References <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00212">TAtomicBuffer.fStats</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ab218c6c5fd42c55b8fbb1c63e98ceea6">fStats</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div>
<div class="ttc" id="classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer_html_ab218c6c5fd42c55b8fbb1c63e98ceea6"><div class="ttname"><a href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#ab218c6c5fd42c55b8fbb1c63e98ceea6">ppm_java.util.storage.atomicBuffer.TAtomicBuffer.fStats</a></div><div class="ttdeci">TAtomicBuffer_Stats fStats</div><div class="ttdoc">The runtime statistics. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00212">TAtomicBuffer.java:212</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3acdd8b9e1b435362f88f56c0ae3c373"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FloatBuffer fBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The underlying data container. </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00186">186</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00436">TAtomicBuffer._DataGet()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00490">TAtomicBuffer._DataSet()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a40b115012a9eb8e658206aa8ff8a12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a> fCopyPolicy</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../d4/d79/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___copy_policy.html">EAtomicBuffer_CopyPolicy</a>. </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00191">191</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00268">TAtomicBuffer.Get()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00362">TAtomicBuffer.Set()</a>.</p>

</div>
</div>
<a class="anchor" id="aca39d349272512ea787274c201f0c84e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AtomicInteger fFlag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The lock. </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00196">196</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>.</p>

</div>
</div>
<a class="anchor" id="a1d9249c09bcb9e0865519b11f122c85d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean fHasBeenCollected</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating whether the data in <a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html#a3acdd8b9e1b435362f88f56c0ae3c373">fBuffer</a> has been collected. </p>
<p>To detect stale data (underrun/overrun detection) </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00202">202</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00436">TAtomicBuffer._DataGet()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00490">TAtomicBuffer._DataSet()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>.</p>

</div>
</div>
<a class="anchor" id="ac160d3eb88f7a2bf3ea6e6a02a05446f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a> fIfInvalidPolicy</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../df/d84/enumppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_e_atomic_buffer___if_invalid_policy.html">EAtomicBuffer_IfInvalidPolicy</a>. </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00207">207</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00436">TAtomicBuffer._DataGet()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00268">TAtomicBuffer.Get()</a>.</p>

</div>
</div>
<a class="anchor" id="ab218c6c5fd42c55b8fbb1c63e98ceea6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dc0/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer___stats.html">TAtomicBuffer_Stats</a> fStats</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The runtime statistics. </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00212">212</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00423">TAtomicBuffer.StatsGet()</a>.</p>

</div>
</div>
<a class="anchor" id="a73ad967d88c8f16ab4d42c76d1a42bd9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int gkLocked = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag value: A thread acquired the lock. </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00176">176</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00558">TAtomicBuffer._Lock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00573">TAtomicBuffer._TryLock()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00586">TAtomicBuffer._Unlock()</a>.</p>

</div>
</div>
<a class="anchor" id="af6ab7cceff88be34913ac3140ed22a40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int gkUnlocked = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag value: Buffer can be accessed. </p>

<p>Definition at line <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00181">181</a> of file <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a>.</p>

<p>Referenced by <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00544">TAtomicBuffer._Init()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00558">TAtomicBuffer._Lock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00573">TAtomicBuffer._TryLock()</a>, <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00586">TAtomicBuffer._Unlock()</a>, and <a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html#l00345">TAtomicBuffer.IsLocked()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../df/d5c/_t_atomic_buffer_8java_source.html">TAtomicBuffer.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d9d/namespaceppm__java.html">ppm_java</a></li><li class="navelem"><a class="el" href="../../dd/de4/namespaceppm__java_1_1util.html">util</a></li><li class="navelem"><a class="el" href="../../d0/d0d/namespaceppm__java_1_1util_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="../../d8/dd7/namespaceppm__java_1_1util_1_1storage_1_1atomic_buffer.html">atomicBuffer</a></li><li class="navelem"><a class="el" href="../../da/d4d/classppm__java_1_1util_1_1storage_1_1atomic_buffer_1_1_t_atomic_buffer.html">TAtomicBuffer</a></li>
    <li class="footer">Generated on Thu Mar 16 2017 06:32:59 for ppm-java by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
